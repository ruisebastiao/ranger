{"version":3,"file":"index.js","sources":["utilities/utils.js","utilities/move.js","utilities/data.js","slider.js","index.js"],"sourcesContent":["export function getNumber (node, value) {\n  return parseInt(node.getAttribute(value), 10)\n}\n\n// -- Prevent text selection while dragging\nexport function pauseEvent (e) {\n  if (e.stopPropagation) {\n    e.stopPropagation()\n  }\n\n  if (e.preventDefault) {\n    e.preventDefault()\n  }\n\n  e.cancelBubble = true\n  e.returnValue = false\n  return false\n}\n\nexport function stopPropagation (e) {\n  if (e.stopPropagation) {\n    e.stopPropagation()\n  }\n\n  e.cancelBubble = true\n}\n\n\nlet now = function now () {\n            return new Date().getTime()\n          }\n\nexport function debounce (func, wait, immediate) {\n  let timeout, args, context, timestamp, result\n  if (null == wait) wait = 100\n\n  function later() {\n    var last = now() - timestamp\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last)\n    } else {\n      timeout = null\n      if (!immediate) {\n        result = func.apply(context, args)\n        if (!timeout) context = args = null\n      }\n    }\n  };\n\n  return function debounced () {\n    context = this\n    args = arguments\n    timestamp = now()\n    var callNow = immediate && !timeout\n    if (!timeout) timeout = setTimeout(later, wait)\n    if (callNow) {\n      result = func.apply(context, args)\n      context = args = null\n    }\n\n    return result\n  }\n}\n","export function setInitialPosition (min, max, initValue) {\n  let initial = isNaN(initValue) ? 0 : initValue\n  let range = (max - min)\n  let percent = Math.round(((initial - min) * 100) / range)\n  return percent\n}\n\nexport function handlePosition (offset, width) {\n  let min = 0\n  let max = 100\n  let ratio = Math.min(Math.max(offset / width, min), 1)\n  let range = (max - min)\n  let percent = Math.round((ratio * range) + min)\n  return percent\n}\n\nexport function handlePositionSteps (offset, width, min, max, stepWidth) {\n  let ratio = Math.min(Math.max(offset / width, 0), 1)\n  let range = (max - min)\n  let currentStep = Math.round((ratio * range) / stepWidth)\n  let percent = ((currentStep * stepWidth) / range) * 100\n  return percent\n}\n\nexport function eventHandler (obj, fn, event, flag = true, update) {\n  fn(event)\n  obj.isMoving = flag\n  obj.animationFrame = window.requestAnimationFrame(update)\n  obj.offset = event.pageX - obj.dimensions.left\n}\n","export function handleValue (min, max, percentage) {\n  let maxRange = max - min\n  return Math.round(((percentage * maxRange) / 100) + min)\n}\n\nexport function setValueInDom (el, value) {\n  el.textContent = value\n}\n\nexport function setAttributeInDom (el, attr, value) {\n  return el.setAttribute(attr, value)\n}\n","import {getNumber, pauseEvent, debounce} from './utilities/utils'\nimport {handlePosition, handlePositionSteps, setInitialPosition, eventHandler} from './utilities/move'\nimport {handleValue, setValueInDom, setAttributeInDom} from './utilities/data'\n\nexport default function () {\n  let sliderNodeList = document.getElementsByClassName('js-ranger')\n  let sliderInputNodeList = document.getElementsByClassName('js-ranger-input')\n  let sliderTrackNodeList = document.getElementsByClassName('js-ranger-track')\n\n  // -- Prevent the script to be excecuted if the required DOM\n  // -- Implementation is wrong\n  if (\n    sliderNodeList.length <= 0 ||\n    sliderInputNodeList.length < sliderNodeList.length ||\n    sliderTrackNodeList.length < sliderNodeList.length) {\n    return\n  }\n\n  let sliderList = Array.prototype.slice.call(sliderNodeList)\n  let setDebouncedValue = debounce(setValueInDom, 10)\n  let setDebouncedAttr = debounce(setAttributeInDom, 40)\n\n  sliderList.forEach((slider, i, array) => {\n    let inputEl = slider.querySelector('.js-ranger-input')\n    let trackEl = slider.querySelector('.js-ranger-track')\n    let distanceEl = slider.querySelector('.js-ranger-distance')\n    let valueEl = slider.querySelector('.js-ranger-value')\n    let indicatorEL = slider.querySelector('.js-ranger-indicator')\n\n    let ranger = {\n      isMoving: false,\n      min: getNumber(inputEl, 'data-min'),\n      max: getNumber(inputEl, 'data-max'),\n      value: getNumber(inputEl, 'value'),\n      steps: getNumber(inputEl, 'data-step'),\n      offset: 0,\n      curretValue: 0,\n      dimensions: trackEl.getBoundingClientRect()\n    }\n\n    let init = () => {\n      let initialPosition = setInitialPosition(ranger.min, ranger.max, ranger.value) + '%'\n\n      distanceEl.style.width = initialPosition\n\n      if (indicatorEL !== null) {\n        setValueInDom(valueEl, ranger.value)\n        indicatorEL.style.left = initialPosition\n      }\n\n      // -- Set the steps fractions in DOM only if required\n      if (!isNaN(ranger.steps)) {\n        let sliderFractionsEl = document.createElement('div')\n        let fractionCount = (ranger.max - ranger.min) / ranger.steps\n        let fractionDistance = (100 / fractionCount)\n        let i\n\n        sliderFractionsEl.classList.add('Slider-steps')\n        slider.appendChild(sliderFractionsEl)\n\n        for (i = fractionCount - 1; i >= 1; i--) {\n          let fraction = document.createElement('span')\n          fraction.classList.add('Slider-fraction')\n\n          fraction.style.left = (fractionDistance * i) + '%'\n          sliderFractionsEl.appendChild(fraction)\n        }\n      }\n\n      window.addEventListener('resize', () => {\n        ranger.dimensions = trackEl.getBoundingClientRect()\n      })\n    }\n\n    init()\n\n    let onMouseDown = e => {\n      eventHandler(ranger, pauseEvent, e, true, update)\n\n      if (!isNaN(ranger.steps)) {\n        ranger.currentPosition = handlePositionSteps(ranger.offset, ranger.dimensions.width, ranger.min, ranger.max, ranger.steps)\n      } else {\n        ranger.currentPosition = handlePosition(ranger.offset, ranger.dimensions.width)\n      }\n\n      ranger.currentValue = handleValue(ranger.min, ranger.max, ranger.currentPosition)\n    }\n\n    let onMouseMove = e => {\n      if (ranger.isMoving) {\n        eventHandler(ranger, pauseEvent, e, true, update)\n\n        if (!isNaN(ranger.steps)) {\n          ranger.currentPosition = handlePositionSteps(ranger.offset, ranger.dimensions.width, ranger.min, ranger.max, ranger.steps)\n        } else {\n          ranger.currentPosition = handlePosition(ranger.offset, ranger.dimensions.width)\n        }\n\n        ranger.currentValue = handleValue(ranger.min, ranger.max, ranger.currentPosition)\n      }\n    }\n\n    let onMouseUp = e => {\n      if (ranger.isMoving) {\n        window.cancelAnimationFrame(ranger.animationFrame)\n        ranger.isMoving = false\n        update(null, false)\n      }\n    }\n\n    // -- Write only function responsible for the updates of the\n    // -- slider components\n    let update = (timeStamp, loop = true) => {\n      if (loop) {\n        ranger.animationFrame = window.requestAnimationFrame(update)\n      }\n\n      slider.classList.toggle('is-moving', ranger.isMoving)\n      distanceEl.style.width = ranger.currentPosition + '%'\n      setDebouncedAttr(inputEl, 'value', ranger.currentValue)\n\n      if (indicatorEL !== null) {\n        setDebouncedValue(valueEl, ranger.currentValue)\n        indicatorEL.style.left = ranger.currentPosition + '%'\n      }\n    }\n\n    slider.addEventListener('mousedown', onMouseDown)\n    window.addEventListener('mousemove', debounce(onMouseMove, 10))\n    window.addEventListener('mouseup', onMouseUp)\n\n  })\n}\n","import createSlider from './slider'\ncreateSlider()\n"],"names":[],"mappings":"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"}